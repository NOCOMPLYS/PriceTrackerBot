import json
from aiogram.utils.exceptions import BotBlocked
from aiogram import Bot, Dispatcher, executor, types
from aiogram.types import KeyboardButton, ReplyKeyboardMarkup, ChatActions
import bd
import urlcheck
import asyncio
import aioschedule


# –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π TOKEN —Å—Ç—Ä–æ–∫–∏ —Å —Ç–æ–∫–µ–Ω–æ–º –±–æ—Ç–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–º —É @BotFather (–≤ —Ü–µ–ª—è—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω,
# –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏–π—Å—è –¥–ª—è —Ç–µ—Å—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã —É–¥–∞–ª—ë–Ω, –¥–ª—è —Ç–µ—Å—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω —É @BotFather)
TOKEN = ""

# –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –±–æ—Ç–∞ bot —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ Bot() —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –µ–º—É –ø–µ—Ä–µ–º–µ–Ω–Ω–Ω–æ–π TOKEN
# –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ token
bot = Bot(token=TOKEN)

# –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ dp —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ Discpatcher() —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram
# –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –µ–º—É –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π bot –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ bot
dp = Dispatcher(bot=bot)


# –û—Ç–∫—Ä—ã—Ç–∏–µ –∏ —á—Ç–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞, —Ö—Ä–∞–Ω—è—â–µ–≥–æ—Å—è –≤ —Ñ–∞–π–ª–µ Users.json –∏ —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏—Ö –±–æ—Ç–∞ —Ä–∞–Ω–µ–µ
with open('Users', 'r') as file:
    from_json = json.load(file)  # –º–∞—Å—Å–∏–≤ —Å id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é from_json
file.close()


"""
 –°–ª–æ–≤–∞—Ä—å –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π - —Å–ª–æ–≤–∞—Ä—å, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–ª—é—á–æ–º —è–≤–ª—è–µ—Ç—Å—è id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ –∑–Ω–∞—á–µ–Ω–∏–µ–º - True/False
 –°–ª–æ–≤–∞—Ä–∏ –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≥–æ, –∫–∞–∫ –±–æ—Ç –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 –µ—Å–ª–∏ –æ–Ω–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π
"""

# –°–æ–∑–¥–∞–Ω–∏–µ –ø—É—Å—Ç—ã—Ö —Å–ª–æ–≤–∞—Ä–µ–π –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π naming_products, adding_products –∏ deleting_products:
# 1 - –°–ª–æ–≤–∞—Ä—å naming_products –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç, –æ–∂–∏–¥–∞–µ—Ç –ª–∏ –±–æ—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞
# 2 - –°–ª–æ–≤–∞—Ä—å adding_products –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –ª–∏ –±–æ—Ç –ø–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –µ–≥–æ –≤ CSV —Ñ–∞–π–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# 2 - –°–ª–æ–≤–∞—Ä—å deleting_products –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç, –æ–∂–∏–¥–∞–µ—Ç –ª–∏ –±–æ—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–æ–º–µ—Ä —É–¥–∞–ª—è–µ–º–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
naming_products = {}
adding_products = {}
deleting_products = {}

# –°–æ–∑–¥–∞–Ω–∏–µ –ø—É—Å—Ç—ã—Ö —Å–ª–æ–≤–∞—Ä–µ–π shops –∏ urls:
# 1 - –°–ª–æ–≤–∞—Ä—å urls —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Å—ã–ª–∫—É, –ø—Ä–∏—Å–ª–∞–Ω–Ω–æ—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, –∫–ª—é—á–æ–º –¥–ª—è
#     –∫–∞–∂–¥–æ–π —Å—Å—ã–ª–∫–∏ —Å–ª—É–∂–∏—Ç id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# 2 - –°–ª–æ–≤–∞—Ä—å shops —Ö—Ä–∞–Ω–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –≤–µ–¥—ë—Ç –ø–æ—Å–ª–µ–¥–Ω—è—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞, –ø—Ä–∏—Å–ª–∞–Ω–Ω–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º,
#     –∫–ª—é—á–æ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è —è–≤–ª—è–µ—Ç—Å—è id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
urls = {}
shops = {}

# –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –∫–ª—é—á—É, —è–≤–ª—è—é—â–µ–º—É—Å—è id –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ä–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–µ–≥–æ –±–æ—Ç–∞, –∑–Ω–∞—á–µ–Ω–∏—è False –≤ —Å–ª–æ–≤–∞—Ä—è—Ö
# naming_products, adding_products –∏ deleting_products
for user in from_json:
    naming_products[user] = False
    adding_products[user] = False
    deleting_products[user] = False


async def update():
    """
    –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –≤—Å–µ—Ö –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—â–∏—Ö—Å—è —Ç–æ–≤–∞—Ä–æ–≤ –≤–æ –≤—Å–µ—Ö –ë–î —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏
    UpdateAll(), –æ–ø–∏—Å–∞–Ω–Ω–æ–π –≤ —Ñ–∞–π–ª–µ bd.py

    :return: –§—É–Ω–∫—Ü–∏—è –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
    """
    bd.UpdateAll()


async def scheduler():
    """
    –§—É–Ω–∫—Ü–∏—è —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥ –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ I/O Scheduling
    –ó–∞ —Å—á—ë—Ç —Å–≤–æ–µ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ

    :return:
    """
    aioschedule.every().day.at("00:00").do(update)
    while True:
        await aioschedule.run_pending()
        await asyncio.sleep(1)


async def on_startup(_):
    """
    –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º—É(–∑–∞–¥–∞–Ω–∏–µ) sheduler(), —Ç–µ–º —Å–∞–º—ã–º —Ä–µ–∞–ª–∏–∑—É—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –∏ –ø–æ–∑–≤–æ–ª—è—è
    –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Å–µ —Ü–µ–Ω—ã –≤–æ –≤—Å–µ—Ö –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏ –≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ
    –í –º–æ–º–µ–Ω—Ç—ã, –∫–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ —Å–æ–≤–µ—Ä—à–∞–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –¥—Ä—É–≥–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π, —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è,
    —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ scheduler –∏ –≤ —Å–ª—É—á–∞–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è - –∑–∞–ø—É—Å–∫–∞–µ—Ç –µ—ë

    :param _:
    :return:
    """
    asyncio.create_task(scheduler())


async def load_animation(message: types.Message):
    """
    –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏—è, —É–≤–µ–¥–æ–º–ª—è—é—â–∏–µ –æ –Ω–∞—á–∞–ª–µ –ø–æ–∏—Å–∫–∞ —Ñ–∞–π–ª–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
    –î–∞–ª–µ–µ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É, —Å–æ—Å—Ç–æ—è—â—É—é –∏–∑ 10 –±–µ–ª—ã—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤, –ø–æ—Å–ª–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–µ—Ç —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ–æ—á–µ—Ä—ë–¥–Ω–æ –∑–∞–º–µ–Ω—è—è
    —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ –±–µ–ª—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã –∑–µ–ª—ë–Ω—ã–º–∏ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –≤ 0.3 —Å–µ–∫—É–Ω–¥—ã, —Ç–µ–º —Å–∞–º—ã–º –∏–º–∏—Ç–∏—Ä—É—è –∑–∞–≥—Ä—É–∑–∫—É
    –í –∫–æ–Ω—Ü–µ —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, —É–≤–µ–¥–æ–º–ª—è—é—â–µ–µ –æ —Å–∫–æ—Ä–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

    :param message: –û–±—ä–µ–∫—Ç —Ç–∏–ø–∞ Message —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram - —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    :return: –§—É–Ω–∫—Ü–∏—è –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
    """
    await bot.send_message(message.from_user.id,
                           "üîÑ–û—Ç–ª–∏—á–Ω–æ! –ò—â—É —Ü–µ–Ω—É —Ç–æ–≤–∞—Ä–∞ –∏ –¥–æ–±–∞–≤–ª—è—é –µ–≥–æ –≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ, —ç—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è...")
    upload_message = await bot.send_message(chat_id=message.from_user.id, text="‚¨úÔ∏è‚¨úÔ∏è‚¨úÔ∏è‚¨úÔ∏è‚¨úÔ∏è‚¨úÔ∏è‚¨úÔ∏è‚¨úÔ∏è‚¨úÔ∏è‚¨úÔ∏è")
    await asyncio.sleep(1)

    # –¶–∏–∫–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 0.3 —Å–µ–∫—É–Ω–¥—ã
    for i in range(1, 11):
        await upload_message.edit_text(text="üü©" * i + (10 - i) * "‚¨úÔ∏è")
        await asyncio.sleep(0.3)
    await bot.send_message(message.from_user.id, "üîÑ–ü–æ—á—Ç–∏ –≥–æ—Ç–æ–≤–æ...")


# –•—ç–Ω–¥–ª–µ—Ä, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–æ–º–∞–Ω–¥–æ–π /start
@dp.message_handler(commands=['start'])
async def process_start_command(message: types.Message):
    """
    –§—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç–∞—ë—Ç –º–∞—Å—Å–∏–≤ —Å id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏—Ö –±–æ—Ç–∞, –∏–∑ —Ñ–∞–π–ª–∞ User.json, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ id
    –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —ç—Ç–æ–º –º–∞—Å—Å–∏–≤–µ, –≤ —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è - –¥–æ–±–∞–≤–ª—è–µ—Ç id –≤ –º–∞—Å—Å–∏–≤ –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –µ–≥–æ –Ω–∞–∑–∞–¥ –≤ Users.json

    –¢–∞–∫ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç/–∏–∑–º–µ–Ω—è–µ—Ç(–≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–ª—å —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –±–æ—Ç–∞) –≤—Å–µ –¥–∏–∞–ª–æ–≥–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ False

    :param message: –û–±—ä–µ–∫—Ç —Ç–∏–ø–∞ Message —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram - —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    :return: –§—É–Ω–∫—Ü–∏—è –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
    """
    # –î–æ—Å—Ç–∞—ë–º –º–∞—Å–∏–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —Ñ–∞–π–ª–∞ Users.json
    with open('Users', 'r') as file:
        users = json.load(file)
    file.close()

    # –ï—Å–ª–∏ id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –º–∞—Å—Å–∏–≤–µ –≤ —Ñ–∞–π–ª–µ Users.json, –æ–Ω –¥–æ–±–∞–≤–ª—è—Ç—Å—è –≤ —ç—Ç–æ—Ç –º–∞—Å—Å–∏–≤
    if message.from_user.id not in users:

        # –ó–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –º–∞—Å—Å–∏–≤ –≤ —Ñ–∞–π–ª–µ Users.json
        with open('Users', 'w') as file:
            users.append(message.from_user.id)
            json.dump(users, file)
        file.close()

    # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –∫–ª—é—á—É, —è–≤–ª—è—é—â–µ–º—É—Å—è id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–Ω–∞—á–µ–Ω–∏—è False –≤ —Å–ª–æ–≤–∞—Ä—è—Ö naming_products, adding_products
    # –∏ deleting_products
    naming_products[message.from_user.id] = False
    deleting_products[message.from_user.id] = False
    adding_products[message.from_user.id] = False

    await bot.send_message(message.from_user.id, "‚ÑπÔ∏è–Ø –±–æ—Ç, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –≤–µ–¥–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö CSV —Å —Ç–µ–∫—É—â–∏–º–∏ —Ü–µ–Ω–∞–º–∏ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö —Ç–µ–±—è —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –º–∞–≥–∞–∑–∏–Ω–∞—Ö: –°–∏—Ç–∏–ª–∏–Ω–∫, –î–Ω—Å, –≠–ª—å–¥–æ—Ä–∞–¥–æ, –ú–≤–∏–¥–µ–æ –∏ –û–∑–æ–Ω\n\nüïõ–ü—Ä–∏—à–ª–∏ –º–Ω–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–æ–≤–∞—Ä, —è –ø—Ä–æ–≤–µ—Ä—é –µ–≥–æ —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ –∑–∞–Ω–µ—Å—É –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö. –î–∞–ª—å—à–µ —è –±—É–¥—É –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ü–µ–Ω—ã –Ω–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —Ç–æ–≤–∞—Ä—ã —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏ –≤ 00.00 UTC+3 –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –∏—Ö –≤ —Ç–≤–æ–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö\n\nüóÇ–¢—ã –º–æ–∂–µ—à—å –∑–∞–ø—Ä–æ—Å–∏—Ç—å CSV-—Ñ–∞–π–ª —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∏—Ö —Ü–µ–Ω–∞–º–∏ –≤ –ª—é–±–æ–µ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è\n\nüìé–ü—Ä–∏—à–ª–∏ —Å—Å—ã–ª–∫—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ü–µ–Ω—É —Ç–æ–≤–∞—Ä–∞", reply_markup=menu)


# –•—ç–Ω–¥–ª–µ—Ä, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–æ–º–∞–Ω–¥–æ–π /doarickroll
@dp.message_handler(commands=['doarickroll'])
async def rickroller(msg: types.Message):
    """
    –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å—Ç–∞—Ä–æ–π, –Ω–æ –Ω–∞–≤–µ–≤–∞—é—â–µ–π –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è —à—É—Ç–∫–æ–π

    :param msg: –û–±—ä–µ–∫—Ç —Ç–∏–ø–∞ Message —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram - —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    :return: —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ –≤—Ä–µ–º–µ–Ω–∞ –ª–∞–º–ø–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, –ú–µ–¥–≤–µ–¥–∞ –∏ –£–ø—è—á–∫–∏
    """
    await bot.send_message(msg.from_user.id, '<a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Never gonna give you up\nNever gonna let you down\nNever gonna run around and desert you\nNever gonna make you cry\nNever gonna say goodbye\nNever gonna tell a lie and hurt you</a>', parse_mode="HTML")


@dp.message_handler(commands=['update'])
async def updater(msg: types.Message):
    """
    –§—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ë–î –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏
    :param msg:
    :return:
    """
    if msg.from_user.id == 276194719 or msg.from_user.id == 73318898:
        await bot.send_message(msg.from_user.id, "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä!\n\n–ó–∞–ø—É—Å–∫–∞—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ë–î –≤ —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ")
        await bot.send_message(276194719,
                               "‚ÑπÔ∏è–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–ø—É—Å—Ç–∏–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î –≤ —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ")
        await bot.send_message(73318898,
                               "‚ÑπÔ∏è–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–ø—É—Å—Ç–∏–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î –≤ —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ")
        bd.UpdateAll()
        await bot.send_message(276194719,
                               "‚úÖ–ó–∞–≤–µ—Ä—à–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ë–î")
        await bot.send_message(73318898,
                               "‚úÖ–ó–∞–≤–µ—Ä—à–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ë–î")


# –•—ç–Ω–¥–ª–µ—Ä, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–π —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–µ —è–≤–ª—è—é—â–∏–µ—Å—è –∫–æ–º–∞–Ω–¥–∞–º–∏
@dp.message_handler()
async def no_type_message(msg: types.Message):
    """
    –†–∞–±–æ—Ç—É —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π, –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã–∑–≤–∞–Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
    –∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è

    –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - —Ç–µ–∫—Å—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–∏, —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ —Ç–æ–º—É,
    –∫–∞–∫–∞—è –∫–Ω–æ–ø–∫–∞ –±—ã–ª–∞ –≤—ã–±—Ä–∞–Ω–∞

    –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–∏–∞–ª–æ–≥–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞—Å—Ü–µ–Ω–µ–Ω–æ –ª–∏–±–æ –∫–∞–∫
    —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–æ–≤–∞—Ä, –ª–∏–±–æ –∫–∞–∫ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª—è–µ–º–æ–≥–æ —Ç–æ–≤–∞—Ä–∞, –ª–∏–±–æ –∫–∞–∫ –Ω–æ–º–µ—Ä —É–¥–∞–ª—è–µ–º–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –≤ —Å–ø–∏—Å–∫–µ –∏ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
    —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–º –æ–±—Ä–∞–∑–æ–º

    :param msg: –û–±—ä–µ–∫—Ç —Ç–∏–ø–∞ Message —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram - —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    :return: 0 - –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
             –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–≤–∞—Ä–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
    """

    # –ü—Ä–∏–∑–≤–∞–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π user –∑–Ω–∞—á–µ–Ω–∏–µ id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–∞ —É–¥–æ–±—Å—Ç–≤–∞ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
    user = msg.from_user.id

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ç–æ, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ª–∏ –ø–∞—Ä—Å–∏–Ω–≥ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–≤–∞—Ä–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if adding_products[user] is True:
        return 0

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø—Ä–∏—Å—ã–ª–∞–µ–º–æ–≥–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π "‚ûï–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞"
    if msg.text == "‚ûï–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞":

        await bot.send_message(user, "üìé–ü—Ä–∏—à–ª–∏ –º–Ω–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–æ–≤–∞—Ä –∏ —è –Ω–∞—á–Ω—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω—ë–º –∏ –∑–∞–Ω–æ—Å–∏—Ç—å –≤ —Ç–≤–æ–π CSV-—Ñ–∞–π–ª\n\n‚ÑπÔ∏è–¢–µ–±–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–∂–∏–º–∞—Ç—å –Ω–∞ —ç—Ç—É –∫–Ω–æ–ø–∫—É –∫–∞–∂–¥—ã–π —Ä–∞–∑, —Ç—ã –º–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏—Å—ã–ª–∞—Ç—å –º–Ω–µ —Å—Å—ã–ª–∫—É –∏ —è —Å–∞–º –≤—Å—ë –ø–æ–π–º—É")

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø—Ä–∏—Å—ã–ª–∞–µ–º–æ–≥–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π "üóÇ–ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π CSV-—Ñ–∞–π–ª"
    elif msg.text == "üóÇ–ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π CSV-—Ñ–∞–π–ª":

        # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π file_name –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ getFilename(),
        # –æ–ø–∏—Å–∞–Ω–Ω–æ–π –≤ —Ñ–∞–π–ª–µ bd.py
        file_name = bd.getFilename(user)

        # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π products –¥–≤—É–º–µ—Ä–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞, —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ –∏–º–µ–Ω–∞ –∏ url —Å–∞–π—Ç–æ–≤ –∏ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑
        # CSV —Ñ–∞–π–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ getUserList(), –æ–ø–∏—Å–∞–Ω–Ω–æ–π –≤ —Ñ–∞–π–ª–µ bd.py
        products = bd.getUserList(user)

        # –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–µ–π—á–∞—Å –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–π —Ç–æ–≤–∞—Ä
        if len(products) != 0:

            await bot.send_message(user, "üìå–ü—Ä–∏–∫—Ä–µ–ø–∏–ª —Ç–≤–æ–π CSV-—Ñ–∞–π–ª –Ω–∏–∂–µ:")

            #–û—Ç–∫—Ä—ã—Ç–∏–µ CSV —Ñ–∞–π–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞, –∑–∞–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞
            file_for_user = open(file_name, 'rb')
            await bot.send_chat_action(user, ChatActions.UPLOAD_DOCUMENT)
            await bot.send_document(user, file_for_user)
            file_for_user.close()

        else:
            await bot.send_message(user, "–¢—ã –ø–æ–∫–∞ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—à—å –Ω–∏ –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä\n\nüìé–ü—Ä–∏—à–ª–∏ –º–Ω–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–æ–≤–∞—Ä –∏ —è –Ω–∞—á–Ω—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω—ë–º –∏ –∑–∞–Ω–æ—Å–∏—Ç—å –≤ —Ç–≤–æ–π CSV-—Ñ–∞–π–ª")

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø—Ä–∏—Å—ã–ª–∞–µ–º–æ–≥–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π "‚ûñ–£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞"
    elif msg.text == "‚ûñ–£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞":

        # –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–µ–π—á–∞—Å –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–π —Ç–æ–≤–∞—Ä
        if len(bd.getUserList(user)) != 0:

            # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º—É id –∑–Ω–∞—á–µ–Ω–∏—è True –≤ —Å–ª–æ–≤–∞—Ä–µ –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π deleting_products,
            # —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –Ω–æ–º–µ—Ä–∞ —É–¥–∞–ª—è–µ–º–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            deleting_products[user] = True
            await bot.send_message(user, '–ü—Ä–∏—à–ª–∏ –º–Ω–µ –Ω–æ–º–µ—Ä —Ç–æ–≤–∞—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã —Ö–æ—á–µ—à—å —É–¥–∞–ª–∏—Ç—å\n\n‚ÑπÔ∏è–ù–æ–º–µ—Ä —Ç–æ–≤–∞—Ä–∞ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É "–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤"')

        else:
            await bot.send_message(user,
                                   "–¢—ã –ø–æ–∫–∞ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—à—å –Ω–∏ –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä\n\nüìé–ü—Ä–∏—à–ª–∏ –º–Ω–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–æ–≤–∞—Ä –∏ —è –Ω–∞—á–Ω—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω—ë–º –∏ –∑–∞–Ω–æ—Å–∏—Ç—å –≤ —Ç–≤–æ–π CSV-—Ñ–∞–π–ª")

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø—Ä–∏—Å—ã–ª–∞–µ–º–æ–≥–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π "üìã–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤"
    elif msg.text == "üìã–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤":

        # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π products –¥–≤—É–º–µ—Ä–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞, —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ –∏–º–µ–Ω–∞ –∏ url —Å–∞–π—Ç–æ–≤ –∏ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑
        # CSV —Ñ–∞–π–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ getUserList(), –æ–ø–∏—Å–∞–Ω–Ω–æ–π –≤ —Ñ–∞–π–ª–µ bd.py
        products = bd.getUserList(user)

        # –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–µ–π—á–∞—Å –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–π —Ç–æ–≤–∞—Ä
        if len(products) != 0:

            output = 'üìã–í–æ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—à—å:\n\n'

            # –¶–∏–∫–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π output, –∞–¥—Ä–µ—Å–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            # –∏ —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ –Ω–æ–º–µ—Ä —Ç–æ–≤–∞—Ä–∞, –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ(—è–≤–ª—è—é—â–µ–µ—Å—è –≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫–æ–π –Ω–∞ —Å–∞–º —Ç–æ–≤–∞—Ä) –∏ —Ü–µ–Ω—É –≤ —Ä—É–±–ª—è—Ö
            product_index = 1
            for product, url, price in products:
                output += str(product_index) + '. ' + '<a href=' + '"' + url + '">' + product + '</a>' + ' - ' + str(price)
                if price == 'Parsing Error' or price == '–¢–æ–≤–∞—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –ø—Ä–æ–¥–∞–∂–µ':
                    output += '\n'
                else:
                    output += '‚ÇΩ' + '\n'
                product_index += 1
            output += '\n'

            await bot.send_message(user, output, parse_mode="HTML")

        else:
            await bot.send_message(user, "–¢—ã –ø–æ–∫–∞ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—à—å –Ω–∏ –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä\n\nüìé–ü—Ä–∏—à–ª–∏ –º–Ω–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–æ–≤–∞—Ä –∏ —è –Ω–∞—á–Ω—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω—ë–º –∏ –∑–∞–Ω–æ—Å–∏—Ç—å –≤ —Ç–≤–æ–π CSV-—Ñ–∞–π–ª")

    # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –Ω–∏ –∫–æ–º–∞–Ω–¥–æ–π –Ω–∏ —Ç–µ–∫—Å—Ç–æ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–Ω–æ–ø–æ–ø–æ–∫
    else:
        # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å–ª–∞–ª –Ω–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª—è–µ–º–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –∏ –Ω–µ –Ω–æ–º–µ—Ä —É–¥–∞–ª—è–µ–º–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –æ–∑–Ω–∞—á–∞–µ—Ç,
        # —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å–ª–∞–ª —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–æ–≤–∞—Ä
        if naming_products[user] is False and deleting_products[user] is False:

            # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π url —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            url = msg.text

            # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π shop_name –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ processing(),
            # –æ–ø–∏—Å–∞–Ω–Ω–æ–π –≤ —Ñ–∞–π–ª–µ urlcheck.py
            # –ó–Ω–∞—á–µ–Ω–∏–µ - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞, –≤ —Å–ª—É—á–∞–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å—Å—ã–ª–∫–∏, -1 - –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ
            shop_name = urlcheck.processing(url)

            # –ï—Å–ª–∏ —Å—Å—ã–ª–∫–∞, –ø—Ä–∏—Å–ª–∞–Ω–Ω–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
            if shop_name != -1:

                # –ï—Å–ª–∏ —Å—Å—ã–ª–∫–∞, –ø—Ä–∏—Å–ª–∞–Ω–Ω–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —É–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–π —Ç–æ–≤–∞—Ä
                # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ CheckSameURL(), –æ–ø–∏—Å–∞–Ω–Ω–æ–π –≤ —Ñ–∞–π–ª–µ bd.py
                if bd.CheckSameURL(user, url) is False:

                    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ª–æ–≤–∞—Ä—å urls –ø–æ –∫–ª—é—á—É, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–µ–º—É id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    urls[user] = url

                    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞, —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤ —Å—Å—ã–ª–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ª–æ–≤–∞—Ä—å urls
                    # –ø–æ –∫–ª—é—á—É, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–µ–º—É id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    shops[user] = shop_name

                    await bot.send_message(user,
                                           "–¢–µ–ø–µ—Ä—å –ø—Ä–∏—à–ª–∏ –º–Ω–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º —Ç–æ–≤–∞—Ä –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö")

                    # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º—É id –∑–Ω–∞—á–µ–Ω–∏—è True –≤ —Å–ª–æ–≤–∞—Ä–µ –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π naming_products,
                    # —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
                    naming_products[user] = True

                else:
                    await bot.send_message(user, "üö´–¢–æ–≤–∞—Ä, –Ω–∞—Ö–æ–¥—è—â–∏–π—Å—è –ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ —É–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è")
            else:
                await bot.send_message(user, "üö´–°—Å—ã–ª–∫–∞, –∫–æ—Ç–æ—Ä—É—é —Ç—ã –ø—Ä–∏—Å–ª–∞–ª –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑")

        # –ï—Å–ª–∏ –±–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ –æ–∂–∏–¥–∞–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        elif naming_products[user] is True:

            # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –æ–∂–∏–¥–∞–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            naming_products[user] = False

            # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º—É id –∑–Ω–∞—á–µ–Ω–∏—è True –≤ —Å–ª–æ–≤–∞—Ä–µ –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π adding_products,
            # —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ —Ä–∞–±–æ—Ç—ã —Å –±–¥
            # –≠—Ç–æ—Ç —Ä–µ–∂–∏–º –Ω–µ–æ–±—Ö–æ–¥–∏–º —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–≥ –ø–æ—Å–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –±–æ—Ç—É –ø–æ–∫–∞ —Ç–æ—Ç –ø–∞—Ä—Å–∏—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ë–î
            adding_products[user] = True

            # –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ load_animation()
            await load_animation(msg)

            #
            bd.SaveInCSV(user, msg.text, shops[user], urls[user])

            # –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å—Å—ã–ª–∫–∏ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏–∑ —Å–ª–æ–≤–∞—Ä–µ–π
            # shops –∏ urls
            del shops[msg.from_user.id], urls[msg.from_user.id]

            await bot.send_message(user, "‚úÖ–î–æ–±–∞–≤–∏–ª —Ç–æ–≤–∞—Ä –≤ —Ç–≤–æ—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö")

            # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ —Ä–∞–±–æ—Ç—ã —Å –±–¥
            adding_products[user] = False

        # –ï—Å–ª–∏ –±–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ –æ–∂–∏–¥–∞–Ω–∏—è –Ω–æ–º–µ—Ä–∞ —É–¥–∞–ª—è–µ–º–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        elif deleting_products[user] is True:

            # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π products –¥–≤—É–º–µ—Ä–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞, —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ –∏–º–µ–Ω–∞ –∏ url —Å–∞–π—Ç–æ–≤ –∏ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑
            # CSV —Ñ–∞–π–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ getUserList(), –æ–ø–∏—Å–∞–Ω–Ω–æ–π –≤ —Ñ–∞–π–ª–µ bd.py
            products = bd.getUserList(user)

            # –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–µ–π—á–∞—Å –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–π —Ç–æ–≤–∞—Ä
            if len(products) != 0:

                # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–º–µ—Ä–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ —Å–ø–∏—Å–∫–µ, –≤–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
                if '1' <= msg.text <= str(len(products)):

                    # –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –∏–∑ –ë–î —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ DeleteFromCSV, –æ–ø–∏—Å–∞–Ω–Ω–æ–π –≤ —Ñ–∞–π–ª–µ bd.DeleteFromCSV
                    bd.DeleteFromCSV(user, int(msg.text) - 1)

                    await bot.send_message(user, '‚úÖ–£–¥–∞–ª–∏–ª —Ç–æ–≤–∞—Ä –∏–∑ —Ç–≤–æ–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö')
                else:
                    await bot.send_message(user, '–£–ø—Å! –¢–æ–≤–∞—Ä–∞ —Å —Ç–∞–∫–∏–º –Ω–æ–º–µ—Ä–æ–º –Ω–µ—Ç –≤ —Ç–≤–æ–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö\n\nüìã–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É "–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤", —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –Ω–æ–º–µ—Ä –Ω—É–∂–Ω–æ–≥–æ —Ç–µ–±–µ —Ç–æ–≤–∞—Ä–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–π—Å—è —Å—é–¥–∞')
            else:
                await bot.send_message(user,
                                       "–¢—ã –ø–æ–∫–∞ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—à—å –Ω–∏ –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä\n\nüìé–ü—Ä–∏—à–ª–∏ –º–Ω–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–æ–≤–∞—Ä –∏ —è –Ω–∞—á–Ω—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω—ë–º –∏ –∑–∞–Ω–æ—Å–∏—Ç—å –≤ —Ç–≤–æ–π CSV-—Ñ–∞–π–ª")

            # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –æ–∂–∏–¥–∞–Ω–∏—è –Ω–æ–º–µ—Ä–∞ —É–¥–∞–ª—è–µ–º–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            deleting_products[user] = False


@dp.errors_handler(exception=BotBlocked)
async def error_bot_blocked(update: types.Update, exception: BotBlocked):
    """
    –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –≤–æ–∑–Ω–∏–∫–∞—é—â–µ–µ –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –±–æ—Ç–∞ –≤–æ –≤—Ä–µ–º—è –µ–≥–æ —Ä–∞–±–æ—Ç—ã

    :param update: –û–±—ä–µ–∫—Ç —Ç–∏–ø–∞ Update —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram
    :param exception: –û–±—ä–µ–∫—Ç —Ç–∏–ø–∞ BotBlocked —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram
    :return: True –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö
    """

    # –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–µ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –±–æ—Ç–∞
    print(f"–ú–µ–Ω—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å!\n–°–æ–æ–±—â–µ–Ω–∏–µ: {update}\n–û—à–∏–±–∫–∞: {exception}")

    return True


# ----–ú–µ–Ω—é----
# –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ç—ã—Ä—ë—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ KeyboardButton() —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram
add_url_button = KeyboardButton("‚ûï–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞")
delete_product_button = KeyboardButton("‚ûñ–£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞")
recieve_csv_button = KeyboardButton("üóÇ–ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π CSV-—Ñ–∞–π–ª")
show_products_list_button = KeyboardButton("üìã–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤")

# –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ ReplyKeyboardMarkup() —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram
menu = ReplyKeyboardMarkup(resize_keyboard=True).add(add_url_button, delete_product_button, show_products_list_button, recieve_csv_button)

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ start_polling() —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram
executor.start_polling(dp, skip_updates=True, on_startup=on_startup)
